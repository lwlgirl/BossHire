<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>register</title>
    <link href="css/loginCss.css" rel="stylesheet">
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

</head>

<body style="background: #5dd5c8 url(https://static.zhipin.com/zhipin-geek/v73/web/geek/images/newbg.png) center bottom ;position: fixed;">

<div style="background-color: white;border-radius: 3%;height: 550px;width: 800px;margin: 200px 550px;position: relative">

    <div style="margin-left:300px;font-size: 23px;position: absolute;margin-top:100px">
        <input type="radio" value="1" name="loginForm"><span>我要找工作</span>
        <input type="radio" value="2" name="loginForm" style="margin-left: 50px"><span>我要招聘</span>
    </div>

    <form style="margin-left:300px;margin-top:200px;position: absolute">
            <span>
                <img style="margin-left: -200px;" src="https://static.zhipin.com/v2/web/geek/images/logo.png">
            </span>
        <div class="form-group" style="margin-top:-100px">
            <label for="user" stype="display:inline;">账户：</label>
            <input type="text" class="form-control" id="user" style="display:inline;height:50px; width:300px;" />
        </div>

        <div class="form-group">
            <label for="password" style="display:inline;">密码：</label>
            <input type="text" class="form-control" id="password" style="display:inline;height:50px;width:300px;"autocomplete="off" />
        </div>

        <button type="submit" class="btn btn-primary" style="width: 350px;height:50px; background-color: #5dd5c8;border-color: #5dd5c8;border-radius: 0px">注册</button>

    </form>
</div>

<script>

    var phone = document.getElementById("user");
    var password = document.getElementById("password");

    var vm = new Vue({
        el: '#login',
        data:{
            phone:phone,
            password:password,
        },
        methods: {
            fetchData() {
                alert("fetchData");
                axios.get('localhost:8080/api/user/login', {
                    params: {
                        post: 2,
                    },
                    headers: {
                        "Accept": "application/json; charset=utf-8",
                        "Content-Type": "application/javascript; charset=utf-8",
                        "Access-Control-Allow-Origin": "*",
                    },
                    dataType: 'json',
                }).then(response => {
                    if(response.data.code == 1){
                        var msg="用户名或密码错误";
                        document.getElementById("msg").innerText=msg;
                    }else if(response.data.code == 0){

                        var cookie = xmlHttp.getResponseHeader("Platform-Token");
                        sessionStorage.setItem('token',cookie);

                        url = "index.html";
                        window.location.href = url;
                    }
                }).catch(error => {
                    console.log("error" + error);
                    console.log("failure")
                })
            },
        }

    });
</script>
</body>

</html>